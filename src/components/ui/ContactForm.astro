---
import { Icon } from 'astro-icon/components';

interface Props {
  buttonText?: string;
}

const { buttonText = "Enviar mensaje" } = Astro.props;
---

<form class="space-y-6">
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <label for="name" class="block text-sm font-bold text-slate-700 mb-2">Nombre</label>
      <input type="text" id="name" name="name" required placeholder="Ej: Lucas" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all" />
    </div>
    <div>
      <label for="email" class="block text-sm font-bold text-slate-700 mb-2">Email de contacto</label>
      <input type="email" id="email" name="email" required placeholder="tu@email.com" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all" />
    </div>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <label for="petType" class="block text-sm font-bold text-slate-700 mb-2">Mascota</label>
      <input type="text" id="petType" name="petType" placeholder="Ej: Perro / Gato" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all" />
    </div>
    <div>
      <label for="subject" class="block text-sm font-bold text-slate-700 mb-2">Asunto</label>
      <select id="subject" name="subject" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 outline-none appearance-none bg-no-repeat bg-right pr-10">
        <option value="plan-salud">Plan de Salud</option>
        <option value="urgencias">Urgencias</option>
        <option value="turno">Turno General</option>
        <option value="otros">Otros</option>
      </select>
    </div>
  </div>

  <div>
    <label for="message" class="block text-sm font-bold text-slate-700 mb-2">Mensaje</label>
    <textarea id="message" name="message" rows="4" required placeholder="¿En qué podemos ayudarte?" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 outline-none transition-all resize-none"></textarea>
  </div>

  <button type="submit" class="w-full bg-blue-600 text-white font-bold py-4 rounded-xl md:hover:bg-blue-700 shadow-lg md:shadow-blue-200 transition-all flex items-center justify-center gap-2 group">
    {buttonText}
    <Icon name="mdi:send-outline" class="w-5 h-5 md:group-hover:translate-x-1 md:group-hover:-rotate-45 md:group-hover:-translate-y-1 transition-transform" />
  </button>
</form>

<script>

  interface ContactData {
    name: string;
    email: string;
    petType: string;
    subject: string;
    message: string;
  }

  const form = document.querySelector('form');

  form?.addEventListener('submit', (e) => {
    e.preventDefault();
    const formData = new FormData(form as HTMLFormElement);
    
    
    const data: ContactData = {
      name: formData.get('name') as string,
      email: formData.get('email') as string,
      petType: formData.get('petType') as string,
      subject: formData.get('subject') as string,
      message: formData.get('message') as string,
    };

    console.log("Datos con Email validados:", data);
    alert(`Gracias ${data.name}. Hemos recibido tu consulta desde ${data.email}.`);
    (form as HTMLFormElement).reset();
  });
</script>