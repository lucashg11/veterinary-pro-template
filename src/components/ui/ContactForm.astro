---
import { Icon } from "astro-icon/components";

interface Props{
    buttonText?: string;
}

const {buttonText = "Enviar Mensaje"} = Astro.props;
---
<form action="POST" class="space-y-6">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        <div>
            <label for="name" class="block text-sm font-bold text-slate-700 mb-2">Nombre</label>
            <input type="text" id="name" name="name" class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all outline-none" placeholder="Ej: Lucas" required>
        </div>
        <div>
            <label for="email" class="block text-sm font-medium text-slate-700 mb-2">Email</label>
            <input type="email" id="email" name="email" class="w-full px-4 py-3 border border-slate-100 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all outline-none" placeholder="Ej:jhondoe@mail.com" required>
        </div>
        <div>
            <label for="petType" class="block text-sm font-bold text-slate-700 mb-2">Mascota</label>
            <input type="text" id="petType" name="petType" class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all outline-none" placeholder="Ej: Perro / Gato" required>
        </div>
        <div>
            <label for="subject" class="block text-sm font-bold text-slate-700 mb-2">Asunto</label>
            <select name="subject" id="subject" class="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-blue-500 outline-none appearance-none bg-no-repeat bg-right pr-10">
                <option value="plan-salud">Plan Salud</option>
                <option value="urgencias">Urgencias</option>
                <option value="turno">Turno General</option>
                <option value="otro">Otro</option>
            </select>
        </div>
        <div>
            <label for="message" class="block text-sm font-bold text-slate-700 mb-2">Mensaje</label>
            <textarea id="message" name="message" rows="4" class="w-full px-4 py-3 border border-slate-200 rounded-xl focus:border-blue-500 transition-all outline-none resize-none" placeholder="En que podemos ayudarte?" required></textarea>
        </div>
        <button class="w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all flex items-center justify-center gap-2 group">
            <Icon name="mdi:send-outline" class="w-5 h-5 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform" />
            {buttonText}
        </button>
    </div>
</form>

<script>
    interface ContactData {
        name: string;
        email: string;
        petType: string;
        subject: string;
        message: string;
    }

    const form = document.querySelector('form');

    form?.addEventListener('submit', (e) => {
        e.preventDefault();
        const formData = new FormData(form as HTMLFormElement);
        const data: ContactData = {
            name: formData.get('name') as string,
            email: formData.get('email') as string,
            petType: formData.get('petType') as string,
            subject: formData.get('subject') as string,
            message: formData.get('message') as string,
        };
        console.log("Datos validos con TS:", data);
        alert(`Gracias ${data.name}, pronto nos comunicaremos por tu mascota`);
        (form as HTMLFormElement).reset();
    })
</script>